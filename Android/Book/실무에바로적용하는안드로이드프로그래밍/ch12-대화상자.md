# Chapter12. 대화상자

롤리팝 이후로 Dialog의 모습이 달라졌다.

AppCompat 라이브러리는 최신 버전의 기능의 일부를 과거 버전에서도 사용할 수 있도록 해준다.

## AppCompat 라이브러리

의존성 추가하기

## DialogFragment 생성하기

AlertDialog는 DialogFragment의 인스턴스에 래핑하는 것이 좋다.  
(래핑 - 포함되어 같이 동작)

DialogFragment 없이도 동작하지만 권장 X.    
FragmentManager에 의해 관리되지 않기 때문에 장치 회전시 다이얼로그 사라짐.

이 애플리케이션에서는 DialogFragment의 서브 클래스인 DatePickerFragment를 사용할 것임.

![](https://apprize.info/google/programming/programming.files/image135.jpg)

해야 할 일
1. DatePickerFragment 클래스 생성
2. AlertDialog로 대화상자 생성
3. 대화상자를 FragmentManager를 통해 화면에 보여준다.

```kotlin
import android.support.v4.app.DialogFragment
import android.support.v7.app.AlertDialog

class DatePickerFragment : DialogFragment() {
    override fun onCreateDialog(savedInstanceState: Bundle?): Dialog = AlertDialog.Builder(requireActivity())
            .setTitle(R.string.date_picker_title)
            .setPositiveButton(android.R.string.ok, null) 
            .create()
}
```

### DialogFragment 보여주기

DialogFragment도 FragmentManager에 의해 관리된다.

```java
// FragmentManager에 추가하여 화면에 나타나게 해주는 메서드

public void show(FragmentManager manager, String tag)
// 트랜잭션 자동 생성 후 커밋됨.

public void show(FragmentTransaction transaction, String tag)
```

```kotlin
// CrimeFragment.kt
...
    crimeDate.setOnClickListener { 
        DatePickerFragment().show(fragmentManager, DIALOG_DATE)
    }
...
```

### 대화상자의 콘텐트 설정하기

```java
public AlertDialog.Builder setView(View view)
// 인자로 전달된 View를 제목과 버튼 사이에 보여주기 위해 대화상자를 구성한다.
```



## 두 프래그먼트 간에 데이터 전달하기

### DatePickerFragment에 데이터 전달하기

### CrimeFragment로 데이터 반환하기

## 챌린지: 더 많은 대화상자 만들기

## 챌린지: 응답 가능한 DialogFragment