

OAuth2
1. App -> Github
2. Github -> App (Redirect)  
내가 설정한 Redirect URL => Activity에 대해서 Intent Filter를 등록

-----

Android Framework  

- Main Thread : UI를 업데이트 하는 역활  
=> UI 스레드안에서 네트워크 요청이 수행될 수 없다.  
: NetworkOnMainThreadException  

-----

Intent? : 의도  

- tel://010-1234-5678                 
    - 전화  
- sms://010-1234-5678?message=안녕하세요 
    - 문자  
- https://github.com/login/oauth/authorize?client_id=XXX 
    - 브라우져  

-----

1. CLIENT_ID, CLIENT_SECRET 은 `companion object` 안에 `const`로 정의해 static 상수처럼 사용하자.

2. onCreate  
signInButton 버튼 클릭 -> 인터넷 브라우저를 실행하는 Intent 전달 (https://github.com/login/oauth/authorize?client_id=XXX) 
    ```kotlin
    // https://github.com/login/oauth/authorize?client_id=XXX

    signInButton.setOnClickListener {
        val authUri = Uri.Builder().scheme("https")
                    .authority("github.com")
                    .appendPath("login")
                    .appendPath("oauth")
                    .appendPath("authorize")
                    .appendQueryParameter("client_id", CLIENT_ID)
                    .build()

        // 인터넷 브라우저를 실행하는 Intent
        // => Custom Tabs: android-support-library
        val intent = CustomTabsIntent.Builder().build()
        intent.launchUrl(this,authUri)
    }
    ```

3. `onNewIntent`를 그냥 사용할 경우,    
결과를 받아와야 하는데 계속 새로운 화면이 뜨는 문제 발생함.

```xml
// AndroidManifest
<activity
    android:name=".SignInActivity"
    android:launchMode="singleTask">
```

launchMode 가 singleTask 혹은 singleTop 인 Activity에 intent를 보내게 되면,

존재 할 경우 onNewIntent, 존재하지 않을 경우 Activity가 새로 시작하게 된다.

## 액티비티 라이프 사이클 나중에 공부해서 추가하기!


-----





